<p>Avoid doing this:</p>

<div class="redhighlight"><pre><code class="language-objc--" data-lang="objc++"><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">CKStackLayoutComponentChild</span><span class="o">&gt;</span> <span class="n">children</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">someSetting</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">children</span><span class="p">.</span><span class="n">push_back</span><span class="p">({[</span><span class="n">CKHeaderComponent</span> <span class="nl">newWithModel</span><span class="p">:</span><span class="n">model</span><span class="p">});</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">fooComponent</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">children</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">fooComponent</span><span class="p">});</span>
<span class="p">}</span>
<span class="k">return</span> <span class="p">[</span><span class="nb">super</span> <span class="nl">newWithComponent</span><span class="p">:</span>
        <span class="p">[</span><span class="n">CKStackLayoutComponent</span>
         <span class="nl">newWithView</span><span class="p">:{}</span>
         <span class="nl">size</span><span class="p">:{}</span>
         <span class="nl">style</span><span class="p">:{}</span>
         <span class="nl">children</span><span class="p">:</span><span class="n">children</span><span class="p">]];</span></code></pre></div>

<p>There are a few reasons why:</p>

<ul>
  <li>There are good reasons to <a href="docs/avoid-local-variables">avoid mutable local variables</a> in general.</li>
  <li>Nil children are automatically dropped by <code>CKStackLayoutComponent</code>, so thereâ€™s no need to check for nil before adding to the list of children.</li>
  <li>Conditionals are best done inline; or, encapsulate the checks in a new <code>CKCompositeComponent</code> that renders to <code>nil</code> if the conditional fails.</li>
</ul>

<p>Instead, do this:</p>

<p><code>objc++
return [super newWithComponent:
        [CKStackLayoutComponent
         newWithView:{}
         size:{}
         style:{}
         children:{
           {someSetting ? [CKHeaderComponent newWithModel:model] : nil},
           {fooComponent},
         }]];
</code></p>
