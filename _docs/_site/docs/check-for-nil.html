<p>Remember: <strong><code>+new</code> can always return nil</strong>. This is particularly important when you’re dealing with ivars.</p>

<p>Components has adopted the convention that a component may return nil from <code>+new</code> to signal that it has no data to render. For example, <code>CKUFIComponent</code> returns nil if there are no buttons in the UFI.</p>

<p>This is important when you are implementing <code>+new</code> because you must be prepared to deal with <code>[super +new...]</code> returning nil.</p>

<div class="redhighlight"><pre><code class="language-objc--" data-lang="objc++"><span class="k">@implementation</span> <span class="nc">CKMyComponent</span>
<span class="p">{</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">_name</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">+</span> <span class="p">(</span><span class="kt">instancetype</span><span class="p">)</span><span class="nf">newWithName:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">name</span>
<span class="p">{</span>
  <span class="n">CKMyComponent</span> <span class="o">*</span><span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="nb">super</span> <span class="nl">newWithComponent</span><span class="p">:...];</span>
  <span class="n">c</span><span class="o">-&gt;</span><span class="n">_name</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">copy</span><span class="p">];</span> <span class="c1">// Crashes if c is nil</span>
  <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Instead:</p>

<p>```objc++</p>

<ul>
  <li>(instancetype)newWithName:(NSString *)name
{
CKMyComponent *c = [super newWithComponent:…];
if (c) {
  c-&gt;_name = [name copy];
}
return c;
}
```</li>
</ul>

<p>(This is somewhat analogous to the usual pattern for implementing <code>-init</code>, where you check if <code>[super init...]</code> returns nil.)</p>
